!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"phonegap-0.2.1",options:{}}},{}],2:[function(a,b){"use strict";var c,d,e,f,g;e=a("../config"),f=a("../tools/cookies"),d=a("../tools/cache"),c=a("../tools/url"),g=a("../tools/sha1"),b.exports=function(b,h,i){var j,k,l,m,n,o,p;return c=c(h),f.init(e,h),d.init(f,e),l={request:{}},p={},o={},n={execProvidersCb:function(a,b,c){var d,e;if(o[a]){d=o[a],delete o[a];for(e in d)d[e](b,c)}},getDescription:function(a,b,c){return b=b||{},"object"==typeof p[a]?c(null,p[a]):(p[a]||n.fetchDescription(a),b.wait?(o[a]=o[a]||[],void o[a].push(c)):c(null,{}))}},e.oauthd_base=c.getAbsUrl(e.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0],j=[],k=void 0,(m=function(){var a,b;b=/[\\#&]oauthio=([^&]*)/.exec(h.location.hash),b&&(h.location.hash=h.location.hash.replace(/&?oauthio=[^&]*/,""),k=decodeURIComponent(b[1].replace(/\+/g," ")),a=f.readCookie("oauthio_state"),a&&(j.push(a),f.eraseCookie("oauthio_state")))})(),b.location_operations={reload:function(){return h.location.reload()},getHash:function(){return h.location.hash},setHash:function(a){return h.location.hash=a},changeHref:function(a){return h.location.href=a}},function(f){var k,m,o,q;k=function(b){l.request=a("./oauthio_requests")(b,e,j,d,n),n.fetchDescription=function(a){p[a]||(p[a]=!0,b.ajax({url:e.oauthd_api+"/providers/"+a,data:{extend:!0},dataType:"json"}).done(function(b){p[a]=b.data,n.execProvidersCb(a,null,b.data)}).always(function(){"object"!=typeof p[a]&&(delete p[a],n.execProvidersCb(a,new Error("Unable to fetch request description")))}))}},null==f.OAuth&&(f.OAuth={initialize:function(a,b){var c;if(e.key=a,b)for(c in b)e.options[c]=b[c]},setOAuthdURL:function(a){e.oauthd_url=a,e.oauthd_base=c.getAbsUrl(e.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},getVersion:function(){return e.version},create:function(a,b,c){var e,g,h,i;if(!b)return d.tryCache(f.OAuth,a,!0);"object"!=typeof c&&n.fetchDescription(a),g=function(d){return l.request.mkHttp(a,b,c,d)},h=function(d,e){return l.request.mkHttpEndpoint(a,b,c,d,e)},i={};for(e in b)i[e]=b[e];return i.get=g("GET"),i.post=g("POST"),i.put=g("PUT"),i.patch=g("PATCH"),i.del=g("DELETE"),i.me=l.request.mkHttpMe(a,b,c,"GET"),i},popup:function(a,c,h){var k,m,n,o,p,q,r;return n=function(a){if(a.origin===e.oauthd_base){try{q.close()}catch(b){}return c.data=a.data,l.request.sendCallback(c,k)}},q=void 0,m=void 0,r=void 0,k=null!=i?i.Deferred():void 0,c=c||{},e.key?(2===arguments.length&&"function"==typeof c&&(h=c,c={}),d.cacheEnabled(c.cache)&&(o=d.tryCache(f.OAuth,a,c.cache))?(null!=k&&k.resolve(o),h?h(null,o):k.promise()):(c.state||(c.state=g.create_hash(),c.state_type="client"),j.push(c.state),p=e.oauthd_url+"/auth/"+a+"?k="+e.key,p+="&redirect_uri=http%3A%2F%2Flocalhost",c&&(p+="&opts="+encodeURIComponent(JSON.stringify(c))),c.provider=a,c.cache=c.cache,r=setTimeout(function(){null!=k&&k.reject(new Error("Authorization timed out")),c.callback&&"function"==typeof c.callback&&c.callback(new Error("Authorization timed out"));try{q.close()}catch(a){}},12e5),q=b.open(p,"_blank","location=no,toolbar=no"),q.addEventListener("loadstart",function(b){var d;"http://localhost/"===b.url.substr(0,17)&&(r&&clearTimeout(r),d=/[\\#&]oauthio=([^&]*)/.exec(b.url),q.close(),d&&d[1]?(c.data=decodeURIComponent(d[1].replace(/\+/g," ")),c.callback=h,c.provider=a,l.request.sendCallback(c,k)):(c.callback&&"function"==typeof c.callback&&c.callback(new Error("unable to receive token")),null!=k&&k.reject(new Error("unable to receive token"))))}),null!=k?k.promise():void 0)):(null!=k&&k.reject(new Error("OAuth object must be initialized")),null==h?void 0:h(new Error("OAuth object must be initialized")))},clearCache:function(a){d.clearCache(a)},http_me:function(a){l.request.http_me&&l.request.http_me(a)},http:function(a){l.request.http&&l.request.http(a)}},"undefined"==typeof i?(q=[],m=void 0,"undefined"!=typeof chrome&&chrome.extension?m=function(){return function(){throw new Error("Please include jQuery before oauth.js")}}:(o=h.createElement("script"),o.src="http://code.jquery.com/jquery-2.1.1.min.js",o.type="text/javascript",o.onload=function(){var a;k(b.jQuery);for(a in q)q[a].fn.apply(null,q[a].args)},h.getElementsByTagName("head")[0].appendChild(o),m=function(a){return function(){var b,c;c=[];for(b in arguments)c[b]=arguments[b];q.push({fn:a,args:c})}}),l.request.http=m(function(){l.request.http.apply(f.OAuth,arguments)}),n.fetchDescription=m(function(){n.fetchDescription.apply(n,arguments)}),l.request=a("./oauthio_requests")(b.jQuery,e,j,d,n)):k(i))}}},{"../config":1,"../tools/cache":5,"../tools/cookies":6,"../tools/sha1":7,"../tools/url":8,"./oauthio_requests":3}],3:[function(a,b){var c,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};c=a("../tools/url")(),b.exports=function(a,b,e,f){return{http:function(e){var f,g,h,i,j;h=function(){var e,f,g,h;if(h=j.oauthio.request||{},!h.cors){j.url=encodeURIComponent(j.url),"/"!==j.url[0]&&(j.url="/"+j.url),j.url=b.oauthd_url+"/request/"+j.oauthio.provider+j.url,j.headers=j.headers||{},j.headers.oauthio="k="+b.key,j.oauthio.tokens.oauth_token&&j.oauthio.tokens.oauth_token_secret&&(j.headers.oauthio+="&oauthv=1");for(f in j.oauthio.tokens)j.headers.oauthio+="&"+encodeURIComponent(f)+"="+encodeURIComponent(j.oauthio.tokens[f]);return delete j.oauthio,a.ajax(j)}if(j.oauthio.tokens){if(j.oauthio.tokens.access_token&&(j.oauthio.tokens.token=j.oauthio.tokens.access_token),j.url.match(/^[a-z]{2,16}:\/\//)||("/"!==j.url[0]&&(j.url="/"+j.url),j.url=h.url+j.url),j.url=c.replaceParam(j.url,j.oauthio.tokens,h.parameters),h.query){g=[];for(e in h.query)g.push(encodeURIComponent(e)+"="+encodeURIComponent(c.replaceParam(h.query[e],j.oauthio.tokens,h.parameters)));j.url+=d.call(j.url,"?")>=0?"&"+g:"?"+g}if(h.headers){j.headers=j.headers||{};for(e in h.headers)j.headers[e]=c.replaceParam(h.headers[e],j.oauthio.tokens,h.parameters)}return delete j.oauthio,a.ajax(j)}},j={},i=void 0;for(i in e)j[i]=e[i];return j.oauthio.request&&j.oauthio.request!==!0?h():(g={wait:!!j.oauthio.request},f=null!=a?a.Deferred():void 0,providers_api.getDescription(j.oauthio.provider,g,function(a,b){return a?null!=f?f.reject(a):void 0:(j.oauthio.request=j.oauthio.tokens.oauth_token&&j.oauthio.tokens.oauth_token_secret?b.oauth1&&b.oauth1.request:b.oauth2&&b.oauth2.request,void(null!=f&&f.resolve()))}),null!=f?f.then(h):void 0)},http_me:function(c){var d,e,f,g,h;f=function(){var c,d,e,f;c=null!=a?a.Deferred():void 0,f=h.oauthio.request||{},h.url=b.oauthd_url+"/auth/"+h.oauthio.provider+"/me",h.headers=h.headers||{},h.headers.oauthio="k="+b.key,h.oauthio.tokens.oauth_token&&h.oauthio.tokens.oauth_token_secret&&(h.headers.oauthio+="&oauthv=1");for(d in h.oauthio.tokens)h.headers.oauthio+="&"+encodeURIComponent(d)+"="+encodeURIComponent(h.oauthio.tokens[d]);return delete h.oauthio,e=a.ajax(h),a.when(e).done(function(a){null!=c&&c.resolve(a.data)}).fail(function(a){a.responseJSON?null!=c&&c.reject(a.responseJSON.data):null!=c&&c.reject(new Error("An error occured while trying to access the resource"))}),null!=c?c.promise():void 0},h={};for(g in c)h[g]=c[g];return h.oauthio.request&&h.oauthio.request!==!0?f():(e={wait:!!h.oauthio.request},d=null!=a?a.Deferred():void 0,providers_api.getDescription(h.oauthio.provider,e,function(a,b){return a?null!=d?d.reject(a):void 0:(h.oauthio.request=h.oauthio.tokens.oauth_token&&h.oauthio.tokens.oauth_token_secret?b.oauth1&&b.oauth1.request:b.oauth2&&b.oauth2.request,void(null!=d&&d.resolve()))}),null!=d?d.then(f):void 0)},mkHttp:function(a,b,c,d){var e;return e=this,function(f,g){var h,i;if(i={},"string"==typeof f){if("object"==typeof g)for(h in g)i[h]=g[h];i.url=f}else if("object"==typeof f)for(h in f)i[h]=f[h];return i.type=i.type||d,i.oauthio={provider:a,tokens:b,request:c},e.http(i)}},mkHttpMe:function(a,b,c,d){var e;return e=this,function(f){var g;return g={},g.type=g.type||d,g.oauthio={provider:a,tokens:b,request:c},g.data=g.data||{},g.data.filter=f?f.join(","):void 0,e.http_me(g)}},sendCallback:function(a,b){var c,d,g,h,i,j,k,l,m;c=this,d=void 0,h=void 0;try{d=JSON.parse(a.data)}catch(n){return g=n,null!=b&&b.reject(new Error("Error while parsing result")),a.callback(new Error("Error while parsing result"))}if(d&&d.provider){if(a.provider&&d.provider.toLowerCase()!==a.provider.toLowerCase())return h=new Error("Returned provider name does not match asked provider"),null!=b&&b.reject(h),a.callback&&"function"==typeof a.callback?a.callback(h):void 0;if("error"===d.status||"fail"===d.status)return h=new Error(d.message),h.body=d.data,null!=b&&b.reject(h),a.callback&&"function"==typeof a.callback?a.callback(h):void 0;if("success"!==d.status||!d.data)return h=new Error,h.body=d.data,null!=b&&b.reject(h),a.callback&&"function"==typeof a.callback?a.callback(h):void 0;if(!d.state||-1===e.indexOf(d.state))return null!=b&&b.reject(new Error("State is not matching")),a.callback&&"function"==typeof a.callback?a.callback(new Error("State is not matching")):void 0;if(a.provider||(d.data.provider=d.provider),l=d.data,f.cacheEnabled(a.cache)&&l&&f.storeCache(d.provider,l),k=l.request,delete l.request,m=void 0,l.access_token?m={access_token:l.access_token}:l.oauth_token&&l.oauth_token_secret&&(m={oauth_token:l.oauth_token,oauth_token_secret:l.oauth_token_secret}),!k)return null!=b&&b.resolve(l),a.callback&&"function"==typeof a.callback?a.callback(null,l):void 0;if(k.required)for(i in k.required)m[k.required[i]]=l[k.required[i]];return j=function(a){return c.mkHttp(d.provider,m,k,a)},l.get=j("GET"),l.post=j("POST"),l.put=j("PUT"),l.patch=j("PATCH"),l.del=j("DELETE"),l.me=c.mkHttpMe(d.provider,m,k,"GET"),null!=b&&b.resolve(l),a.callback&&"function"==typeof a.callback?a.callback(null,l):void 0}}}}},{"../tools/url":8}],4:[function(a){var b;(b=a("./lib/oauth")(window,document,window.jQuery||window.Zepto,navigator))(window||this)},{"./lib/oauth":2}],5:[function(a,b){b.exports={init:function(a,b){return this.config=b,this.cookies=a},tryCache:function(a,b,c){var d,e,f;if(this.cacheEnabled(c)){try{c=JSON.parse(window.localStorage.getItem("oauthio_provider_"+b))}catch(g){d=g,c=!1}if(c=c&&c.date>=(new Date).getTime()?c.value:!1,!c)return!1;c=decodeURIComponent(c)}if("string"==typeof c)try{c=JSON.parse(c)}catch(g){return d=g,!1}if("object"==typeof c){f={};for(e in c)"request"!==e&&"function"!=typeof c[e]&&(f[e]=c[e]);return a.create(b,f,c.request)}return!1},clearCache:function(a){return window.localStorage.removeItem("oauthio_provider_"+a)},storeCache:function(a,b){var c;c=1e3*b.expires_in-1e4||36e6,window.localStorage.setItem("oauthio_provider_"+a,JSON.stringify({value:encodeURIComponent(JSON.stringify(b)),date:(new Date).getTime()+c}))},cacheEnabled:function(a){return"undefined"==typeof a?this.config.options.cache:a}}},{}],6:[function(a,b){b.exports={init:function(a,b){return this.config=a,this.document=b},createCookie:function(a,b,c){var d;this.eraseCookie(a),d=new Date,d.setTime(d.getTime()+1e3*(c||1200)),c="; expires="+d.toGMTString(),this.document.cookie=a+"="+b+c+"; path=/"},readCookie:function(a){var b,c,d,e;for(e=a+"=",c=this.document.cookie.split(";"),d=0;d<c.length;){for(b=c[d];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(e))return b.substring(e.length,b.length);d++}return null},eraseCookie:function(a){var b;b=new Date,b.setTime(b.getTime()-864e5),this.document.cookie=a+"=; expires="+b.toGMTString()+"; path=/"}}},{}],7:[function(a,b){var c,d;d=0,c="",b.exports={hex_sha1:function(a){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(a)))},b64_sha1:function(a){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(a)))},any_sha1:function(a,b){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(a)),b)},hex_hmac_sha1:function(a,b){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},b64_hmac_sha1:function(a,b){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},any_hmac_sha1:function(a,b,c){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(b)),c)},sha1_vm_test:function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"===thishex_sha1("abc").toLowerCase()},rstr_sha1:function(a){return this.binb2rstr(this.binb_sha1(this.rstr2binb(a),8*a.length))},rstr_hmac_sha1:function(a,b){var c,d,e,f,g;for(c=this.rstr2binb(a),c.length>16&&(c=this.binb_sha1(c,8*a.length)),f=Array(16),g=Array(16),e=0;16>e;)f[e]=909522486^c[e],g[e]=1549556828^c[e],e++;return d=this.binb_sha1(f.concat(this.rstr2binb(b)),512+8*b.length),this.binb2rstr(this.binb_sha1(g.concat(d),672))},rstr2hex:function(a){var b,c,e,f,g;try{}catch(h){b=h,d=0}for(c=d?"0123456789ABCDEF":"0123456789abcdef",f="",g=void 0,e=0;e<a.length;)g=a.charCodeAt(e),f+=c.charAt(g>>>4&15)+c.charAt(15&g),e++;return f},rstr2b64:function(a){var b,d,e,f,g,h,i;try{}catch(j){b=j,c=""}for(h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="",f=a.length,d=0;f>d;){for(i=a.charCodeAt(d)<<16|(f>d+1?a.charCodeAt(d+1)<<8:0)|(f>d+2?a.charCodeAt(d+2):0),e=0;4>e;)g+=8*d+6*e>8*a.length?c:h.charAt(i>>>6*(3-e)&63),e++;d+=3}return g},rstr2any:function(a,b){var c,d,e,f,g,h,i,j,k;for(d=b.length,j=Array(),f=void 0,h=void 0,k=void 0,i=void 0,c=Array(Math.ceil(a.length/2)),f=0;f<c.length;)c[f]=a.charCodeAt(2*f)<<8|a.charCodeAt(2*f+1),f++;for(;c.length>0;){for(i=Array(),k=0,f=0;f<c.length;)k=(k<<16)+c[f],h=Math.floor(k/d),k-=h*d,(i.length>0||h>0)&&(i[i.length]=h),f++;j[j.length]=k,c=i}for(g="",f=j.length-1;f>=0;)g+=b.charAt(j[f]),f--;for(e=Math.ceil(8*a.length/(Math.log(b.length)/Math.log(2))),f=g.length;e>f;)g=b[0]+g,f++;return g},str2rstr_utf8:function(a){var b,c,d,e;for(c="",b=-1,d=void 0,e=void 0;++b<a.length;)d=a.charCodeAt(b),e=b+1<a.length?a.charCodeAt(b+1):0,d>=55296&&56319>=d&&e>=56320&&57343>=e&&(d=65536+((1023&d)<<10)+(1023&e),b++),127>=d?c+=String.fromCharCode(d):2047>=d?c+=String.fromCharCode(192|d>>>6&31,128|63&d):65535>=d?c+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|63&d):2097151>=d&&(c+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|63&d));return c},str2rstr_utf16le:function(a){var b,c;for(c="",b=0;b<a.length;)c+=String.fromCharCode(255&a.charCodeAt(b),a.charCodeAt(b)>>>8&255),b++;return c},str2rstr_utf16be:function(a){var b,c;for(c="",b=0;b<a.length;)c+=String.fromCharCode(a.charCodeAt(b)>>>8&255,255&a.charCodeAt(b)),b++;return c},rstr2binb:function(a){var b,c;for(c=Array(a.length>>2),b=0;b<c.length;)c[b]=0,b++;for(b=0;b<8*a.length;)c[b>>5]|=(255&a.charCodeAt(b/8))<<24-b%32,b+=8;return c},binb2rstr:function(a){var b,c;for(c="",b=0;b<32*a.length;)c+=String.fromCharCode(a[b>>5]>>>24-b%32&255),b+=8;return c},binb_sha1:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b,p=Array(80),c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=-1009589776,h=0;h<a.length;){for(j=c,k=d,l=e,m=f,n=g,i=0;80>i;)p[i]=16>i?a[h+i]:this.bit_rol(p[i-3]^p[i-8]^p[i-14]^p[i-16],1),o=this.safe_add(this.safe_add(this.bit_rol(c,5),this.sha1_ft(i,d,e,f)),this.safe_add(this.safe_add(g,p[i]),this.sha1_kt(i))),g=f,f=e,e=this.bit_rol(d,30),d=c,c=o,i++;c=this.safe_add(c,j),d=this.safe_add(d,k),e=this.safe_add(e,l),f=this.safe_add(f,m),g=this.safe_add(g,n),h+=16}return Array(c,d,e,f,g)},sha1_ft:function(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d},sha1_kt:function(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514},safe_add:function(a,b){var c,d;return c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16),d<<16|65535&c},bit_rol:function(a,b){return a<<b|a>>>32-b},create_hash:function(){var a;return a=this.b64_sha1((new Date).getTime()+":"+Math.floor(9999999*Math.random())),a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],8:[function(a,b){b.exports=function(a){return{getAbsUrl:function(b){var c;return b.match(/^.{2,5}:\/\//)?b:"/"===b[0]?a.location.protocol+"//"+a.location.host+b:(c=a.location.protocol+"//"+a.location.host+a.location.pathname,"/"!==c[c.length-1]&&"#"!==b[0]?c+"/"+b:c+b)},replaceParam:function(a,b,c){return a=a.replace(/\{\{(.*?)\}\}/g,function(a,c){return b[c]||""}),c&&(a=a.replace(/\{(.*?)\}/g,function(a,b){return c[b]||""})),a}}}},{}]},{},[4]);